{% extends "main.html" %}
{% block title %}Your Cart{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-10">
      <div class="card shadow-sm">
        <div class="card-body">
          <h3 class="card-title mb-4">ðŸ›’ Your Shopping Cart</h3>

          {% if cart %}
          <!-- Table responsive on small devices -->
          <div class="table-responsive">
            <table class="table table-striped align-middle text-nowrap">
              <thead class="table-light">
                <tr>
                  <th>Product</th>
                  <th>Quantity</th>
                  <th>Price</th>
                  <th>Total</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                {% for item in cart %}
                <tr>
                  <td>{{ item.name }}</td>
                  <td>{{ item.quantity }}</td>
                  <td>$ {{ item.price }}</td>
                  <td>$ {{ item.total }}</td>
                  <td>
                    <a href="{% url 'remove_from_cart' item.product.id %}" class="btn btn-sm btn-danger">
                      Remove
                    </a>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>

          <!-- Totals -->
          <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mt-4 gap-3">
            <div>
              <h6 class="mb-2">Total (USD): <strong>$ {{ cart.get_total_price }}</strong></h6>
              <h6>Total (Ksh): <strong>Ksh. {{ tp_in_ksh }}</strong></h6>
            </div>
            <div class="w-100 w-md-auto">
              <a href="{% url 'checkout' %}" class="btn btn-success btn-lg w-100 w-md-auto">Proceed to Checkout</a>
            </div>
          </div>

          {% else %}
          <div class="alert alert-info mt-3">Your cart is empty.</div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  @media (max-width: 576px) {
    h3.card-title {
      font-size: 1.3rem;
    }

    table th, table td {
      font-size: 0.875rem;
    }

    .btn-danger, .btn-success {
      font-size: 0.875rem;
      padding: 0.5rem 0.75rem;
    }
  }
</style>
{% endblock %}
